/* =============================================================================
   SISTEMA DE FILTROS OPTIMIZADO PARA WMS
   ============================================================================= */

/* Variables CSS para consistencia - Reducido 40% */
:root {
  --filtros-padding: 0.9rem;
  --filtros-gap: 0.45rem;
  --filtros-gap-interno: 0.3rem;
  --filtros-border-radius: 0.6rem;
  --filtros-background: white;
  --filtros-border: 0.6px solid #f1f5f9;
  --filtros-shadow: 0 1.2px 2.4px rgba(0, 0, 0, 0.06),
    0 0.6px 1.2px rgba(0, 0, 0, 0.1);

  /* Breakpoints responsivos - Ajustados */
  --breakpoint-tablet: 460px;
  --breakpoint-mobile: 288px;

  /* Dimensiones optimizadas para campos - Reducido 40% */
  --campo-min-width: 84px;
  --campo-med-width: 108px;
  --campo-large-width: 132px;
  --campo-xl-width: 156px;

  /* Espaciado mejorado para labels - Reducido 40% */
  --label-margin-bottom: 0.15rem;
  --campo-padding-vertical: 0.3rem;
}

/* =============================================================================
   CONTENEDOR PRINCIPAL DE FILTROS
   ============================================================================= */

.seccion-filtros {
  background: var(--filtros-background);
  border-radius: var(--filtros-border-radius);
  padding: var(--filtros-padding);
  margin-bottom: 1.2rem;
  box-shadow: var(--filtros-shadow);
  border: var(--filtros-border);
  transition: box-shadow 0.2s ease-in-out;
}

.seccion-filtros:hover {
  box-shadow: 0 2.4px 4.8px rgba(0, 0, 0, 0.08),
    0 1.2px 2.4px rgba(0, 0, 0, 0.12);
}

.contenedor-filtros {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

/* =============================================================================
   FILAS DE FILTROS - SISTEMA MODULAR
   ============================================================================= */

/* Fila Principal - Búsqueda + 3 filtros clave */
.filtros-fila-principal {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr;
  gap: var(--filtros-gap);
  align-items: start;
}

/* Fila Secundaria - 4-6 filtros específicos */
.filtros-fila-secundaria {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--campo-min-width), 1fr));
  gap: var(--filtros-gap);
  align-items: start;
  max-width: none;
}

/* Fila Avanzada - Filtros adicionales específicos del módulo */
.filtros-fila-avanzada {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--campo-med-width), 1fr));
  gap: var(--filtros-gap);
  align-items: start;
  padding-top: var(--filtros-gap);
  border-top: 1px solid #f8fafc;
}

/* Fila Extra - Para módulos con muchos filtros (como Trazabilidad) */
.filtros-fila-extra {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--campo-min-width), 1fr));
  gap: var(--filtros-gap);
  align-items: start;
  padding-top: var(--filtros-gap);
}

/* Fila de Acciones - Botón limpiar y acciones */
.filtros-fila-acciones {
  display: flex;
  justify-content: space-between;
  align-items: end;
  padding-top: var(--filtros-gap);
  border-top: 1px solid #f8fafc;
  margin-top: var(--filtros-gap);
}

/* =============================================================================
   OPTIMIZACIONES POR TIPO DE CAMPO
   ============================================================================= */

/* Campo de búsqueda principal */
.campo-busqueda-principal {
  min-width: var(--campo-xl-width);
}

/* Campos de fecha */
.campo-fecha {
  min-width: var(--campo-min-width);
  max-width: var(--campo-med-width);
}

/* Campos de selección */
.campo-select {
  min-width: var(--campo-min-width);
}

/* Campos de texto libre */
.campo-texto {
  min-width: var(--campo-med-width);
}

/* =============================================================================
   MEJORAS DE ESPACIADO PARA LABELS
   ============================================================================= */

/* Contenedor de filtros - espaciado mejorado entre elementos */
.seccion-filtros .campo-entrada {
  margin-bottom: 0.25rem;
}

/* Labels de campos de filtros - Reducido 40% */
.seccion-filtros .campo-etiqueta {
  font-size: 0.45rem;
  font-weight: 600;
  color: #374151;
  margin-bottom: var(--label-margin-bottom);
  display: block;
  text-transform: uppercase;
  letter-spacing: 0.015em;
  line-height: 1.2;
}

/* Espaciado interno mejorado para campos - Reducido 40% */
.seccion-filtros input,
.seccion-filtros select,
.seccion-filtros textarea {
  margin-top: 0.15rem;
  font-size: 0.6rem;
  padding: 0.3rem 0.45rem;
}

/* Separadores visuales entre grupos de filtros */
.filtros-fila-principal,
.filtros-fila-secundaria,
.filtros-fila-avanzada,
.filtros-fila-extra {
  position: relative;
}

.filtros-fila-principal::after,
.filtros-fila-secundaria::after,
.filtros-fila-avanzada::after {
  content: "";
  position: absolute;
  bottom: -0.5rem;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    #e5e7eb 20%,
    #e5e7eb 80%,
    transparent
  );
  opacity: 0.5;
}

.filtros-fila-acciones::after,
.filtros-fila-extra::after {
  display: none;
}

/* Mejoras específicas para campos con labels */
.seccion-filtros .campo-entrada:not(:last-child) {
  margin-right: 0;
}

/* Espaciado uniforme entre filas */
.filtros-fila-principal,
.filtros-fila-secundaria,
.filtros-fila-avanzada,
.filtros-fila-extra {
  padding-bottom: 0;
}

.filtros-fila-acciones {
  padding-top: 0;
  padding-bottom: 0;
}

/* =============================================================================
   BOTONES DE ACCIÓN EN FILTROS
   ============================================================================= */

.boton-limpiar {
  min-width: 72px;
  justify-self: end;
  background: #f8fafc;
  border: 0.6px solid #e2e8f0;
  color: #64748b;
  transition: all 0.2s ease-in-out;
  font-size: 0.55rem;
  padding: 0.3rem 0.6rem;
}

.boton-limpiar:hover {
  background: #e2e8f0;
  border-color: #cbd5e1;
  color: #475569;
}

.boton-aplicar-filtros {
  min-width: 72px;
  background: #3b82f6;
  border: 0.6px solid #2563eb;
  color: white;
  font-size: 0.55rem;
  padding: 0.3rem 0.6rem;
}

.boton-aplicar-filtros:hover {
  background: #2563eb;
  border-color: #1d4ed8;
}

/* =============================================================================
   RESPONSIVIDAD OPTIMIZADA
   ============================================================================= */

/* Tablet - 460px y menos (reducido 40%) */
@media (max-width: 460px) {
  .filtros-fila-principal {
    grid-template-columns: 1fr;
    gap: 0.45rem;
  }

  .filtros-fila-secundaria {
    grid-template-columns: repeat(auto-fit, minmax(72px, 1fr));
    gap: 0.45rem;
  }

  .filtros-fila-avanzada {
    grid-template-columns: repeat(auto-fit, minmax(84px, 1fr));
    gap: 0.45rem;
  }

  .filtros-fila-extra {
    grid-template-columns: repeat(auto-fit, minmax(72px, 1fr));
    gap: 0.45rem;
  }

  .seccion-filtros {
    padding: 0.6rem;
    margin-bottom: 0.9rem;
  }

  .filtros-fila-acciones {
    flex-direction: column;
    gap: 0.45rem;
    align-items: stretch;
  }

  .boton-limpiar,
  .boton-aplicar-filtros {
    width: 100%;
    justify-self: stretch;
  }
}

/* Mobile - 288px y menos (reducido 40%) */
@media (max-width: 288px) {
  :root {
    --filtros-gap: 0.3rem;
    --filtros-padding: 0.6rem;
    --label-margin-bottom: 0.075rem;
  }

  .filtros-fila-principal,
  .filtros-fila-secundaria,
  .filtros-fila-avanzada,
  .filtros-fila-extra {
    grid-template-columns: 1fr;
    gap: 0.3rem;
  }

  .contenedor-filtros {
    gap: 0.45rem;
  }

  .campo-busqueda-principal,
  .campo-fecha,
  .campo-select,
  .campo-texto {
    min-width: unset;
    max-width: unset;
  }

  .seccion-filtros {
    padding: 0.45rem;
    border-radius: 0.45rem;
  }
}

/* =============================================================================
   CONFIGURACIONES ESPECÍFICAS POR MÓDULO
   ============================================================================= */

/* VistaTarjas - 3 filas de filtros */
.vista-tarjas .filtros-fila-principal {
  grid-template-columns: 2fr 1fr 1fr 1fr;
}

.vista-tarjas .filtros-fila-secundaria {
  grid-template-columns: repeat(6, minmax(var(--campo-min-width), 1fr));
}

.vista-tarjas .filtros-fila-tercera {
  grid-template-columns: 2fr auto;
  align-items: end;
}

/* VistaTrazabilidad - 4 filas de filtros extensas */
.vista-trazabilidad .filtros-fila-principal {
  grid-template-columns: 2fr 1fr 1fr;
}

.vista-trazabilidad .filtros-fila-secundaria {
  grid-template-columns: repeat(4, minmax(var(--campo-min-width), 1fr));
}

.vista-trazabilidad .filtros-fila-avanzada {
  grid-template-columns: repeat(auto-fit, minmax(var(--campo-min-width), 1fr));
}

.vista-trazabilidad .filtros-fila-extra {
  grid-template-columns: repeat(auto-fit, minmax(var(--campo-min-width), 1fr));
}

/* VistaInventario - Filtros con categorías múltiples */
.vista-inventario .filtros-fila-avanzada {
  grid-template-columns: repeat(auto-fit, minmax(var(--campo-med-width), 1fr));
}

/* VistaOperacionesFrioDespacho - Filtros operacionales */
.vista-operaciones-frio .filtros-fila-secundaria {
  grid-template-columns: repeat(4, minmax(var(--campo-min-width), 1fr));
}

/* VistaRecepcionLotes - Filtros de recepción */
.vista-recepcion-lotes .filtros-fila-secundaria {
  grid-template-columns: repeat(4, minmax(var(--campo-min-width), 1fr));
}

/* =============================================================================
   INDICADORES VISUALES Y ESTADOS
   ============================================================================= */

/* Indicador de filtros activos - Reducido 40% */
.filtros-activos-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.15rem;
  padding: 0.15rem 0.45rem;
  background: #dbeafe;
  color: #1e40af;
  border-radius: 9999px;
  font-size: 0.45rem;
  font-weight: 600;
}

.filtros-activos-badge .icono {
  width: 7.2px;
  height: 7.2px;
}

/* Estados de carga en filtros */
.filtro-cargando {
  opacity: 0.6;
  pointer-events: none;
  position: relative;
}

.filtro-cargando::after {
  content: "";
  position: absolute;
  top: 50%;
  right: 4.8px;
  width: 7.2px;
  height: 7.2px;
  border: 1.2px solid #e5e7eb;
  border-top: 1.2px solid #3b82f6;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  transform: translateY(-50%);
}

@keyframes spin {
  0% {
    transform: translateY(-50%) rotate(0deg);
  }
  100% {
    transform: translateY(-50%) rotate(360deg);
  }
}

/* =============================================================================
   MEJORAS DE ACCESIBILIDAD
   ============================================================================= */

/* Focus mejorado para navegación por teclado */
.seccion-filtros *:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 0.25rem;
}

/* Espaciado mejorado para touch */
@media (pointer: coarse) {
  .filtros-fila-principal,
  .filtros-fila-secundaria,
  .filtros-fila-avanzada,
  .filtros-fila-extra {
    gap: 1.25rem;
  }

  .boton-limpiar,
  .boton-aplicar-filtros {
    min-height: 44px;
  }
}

/* =============================================================================
   UTILIDADES ADICIONALES
   ============================================================================= */

/* Clases helper para casos especiales */
.filtro-ancho-completo {
  grid-column: 1 / -1;
}

.filtro-ancho-medio {
  grid-column: span 2;
}

.filtro-oculto-movil {
  display: block;
}

@media (max-width: 768px) {
  .filtro-oculto-movil {
    display: none;
  }
}

.filtro-solo-movil {
  display: none;
}

@media (max-width: 768px) {
  .filtro-solo-movil {
    display: block;
  }
}
